ì½”ë“œ ì „ì²´ êµ¬ì¡°ëŠ” **CLI íƒ€ì´ë¨¸ ì•±ìœ¼ë¡œì„œ ìƒë‹¹íˆ ì˜ ì§œì—¬ ìˆê³ **,
`Timer`ë¥¼ ìƒíƒœ ë¨¸ì‹ ì²˜ëŸ¼ ì“°ë ¤ëŠ” ì˜ë„ë„ ëª…í™•í•©ë‹ˆë‹¤ ğŸ‘
ì•„ë˜ëŠ” **â€œì§€ê¸ˆ ë‹¨ê³„ì—ì„œ í•˜ë©´ ì¢‹ì€ ë¦¬íŒ©í† ë§â€**ì„ **ìš°ì„ ìˆœìœ„ë³„**ë¡œ ì •ë¦¬í•œ ë¦¬ë·°ì…ë‹ˆë‹¤.

---

# 1ï¸âƒ£ ì…ë ¥ ì²˜ë¦¬ êµ¬ì¡° ë¦¬íŒ©í† ë§ (ì¤‘ìš” â­â­â­)

### ë¬¸ì œì 

* `stdin`ì„ **ì—¬ëŸ¬ ê³³ì—ì„œ ê°ê° ìƒì„±**

  * `main`
  * `run_timer`
  * `run_setting`
* ë™ì‹œì— ì…ë ¥ì„ ê¸°ë‹¤ë¦¬ëŠ” `select!` êµ¬ì¡°ì—ì„œëŠ” **ì…ë ¥ ìŠ¤íŠ¸ë¦¼ ì¶©ëŒ ìœ„í—˜**ì´ ìˆìŒ
* í…ŒìŠ¤íŠ¸í•˜ê¸°ë„ ì–´ë ¤ì›€

### ê°œì„  ë°©í–¥

ğŸ‘‰ **ì…ë ¥ ì±…ì„ì„ í•œ ê³³ìœ¼ë¡œ ëª¨ìœ¼ê¸°**

#### ë°©ë²• A (ê¶Œì¥)

* `main`ì—ì„œ `BufReader<Stdin>` í•˜ë‚˜ë§Œ ë§Œë“¤ê³ 
* `&mut reader`ë¥¼ í•˜ìœ„ í•¨ìˆ˜ë¡œ ì „ë‹¬

```rust
async fn run_timer(
    timer: &mut Timer,
    reader: &mut BufReader<io::Stdin>,
) { ... }

async fn run_setting(
    reader: &mut BufReader<io::Stdin>,
) -> Result<Duration, CustomError> { ... }
```

ğŸ‘‰ ì´ë ‡ê²Œ í•˜ë©´

* ì…ë ¥ íë¦„ì´ ì˜ˆì¸¡ ê°€ëŠ¥
* ë‚˜ì¤‘ì— **íŒŒì¼ ì…ë ¥ / í…ŒìŠ¤íŠ¸ ì…ë ¥**ìœ¼ë¡œ ë°”ê¾¸ê¸° ì‰¬ì›€

---

# 2ï¸âƒ£ `TimerState` ì§ì ‘ ì ‘ê·¼ ì œê±° (ì¤‘ìš” â­â­â­)

### í˜„ì¬

```rust
if timer.state == TimerState::Working
```

### ë¬¸ì œ

* ë‚´ë¶€ ìƒíƒœë¥¼ ì™¸ë¶€ì—ì„œ ì§ì ‘ ë§Œì§
* `Timer`ì˜ ìº¡ìŠí™”ê°€ ê¹¨ì§

### ê°œì„ 

ğŸ‘‰ **ì˜ë„ë¥¼ ë“œëŸ¬ë‚´ëŠ” ë©”ì„œë“œ ì œê³µ**

```rust
impl Timer {
    pub fn is_working(&self) -> bool {
        self.state == TimerState::Working
    }

    pub fn is_inactive(&self) -> bool {
        self.state == TimerState::Inactive
    }
}
```

```rust
if timer.is_working() { ... }
```

ğŸ“Œ ë‚˜ì¤‘ì— ìƒíƒœê°€ ëŠ˜ì–´ë‚˜ë„ í˜¸ì¶œë¶€ ìˆ˜ì • ìµœì†Œí™”

---

# 3ï¸âƒ£ `run_timer`ì˜ ì±…ì„ ë¶„ë¦¬ (ì¤‘ìš” â­â­â­)

### í˜„ì¬ `run_timer`ê°€ í•˜ëŠ” ì¼

1. íƒ€ì´ë¨¸ ì‹œê°„ íë¦„ ì²˜ë¦¬
2. ì‚¬ìš©ì ì…ë ¥ ì²˜ë¦¬
3. ì¶œë ¥ í¬ë§· ê²°ì •
4. ì¢…ë£Œ ì¡°ê±´ ê´€ë¦¬

ğŸ‘‰ **SRP(ë‹¨ì¼ ì±…ì„ ì›ì¹™) ìœ„ë°˜**

### ì¶”ì²œ êµ¬ì¡°

```rust
async fn run_timer(timer: &mut Timer, reader: &mut BufReader<Stdin>) {
    timer.start();

    loop {
        tokio::select! {
            _ = tick(timer) => {}
            cmd = read_command(reader) => {
                if handle_command(timer, cmd).await {
                    break;
                }
            }
        }
    }
}
```

* `tick(timer)` â†’ ì‹œê°„ íë¦„
* `read_command()` â†’ ì…ë ¥
* `handle_command()` â†’ ìƒíƒœ ë³€ê²½

ğŸ‘‰ **ì§€ê¸ˆì€ ê³¼í•´ ë³´ì¼ ìˆ˜ ìˆì§€ë§Œ**,
ì´ êµ¬ì¡°ëŠ” GUI / TUI / ë°ëª¬ìœ¼ë¡œ í™•ì¥í•  ë•Œ ì§„ì§œ í˜ì„ ë°œíœ˜í•¨

---

# 4ï¸âƒ£ `TimerCommand` íŒŒì‹± ìœ„ì¹˜ ê°œì„  (ì¤‘ìš” â­â­)

### í˜„ì¬

```rust
let command = input.trim().parse::<TimerCommand>();
```

### ê°œì„ 

ğŸ‘‰ **ì…ë ¥ â†’ ëª…ë ¹ ë³€í™˜ ë¡œì§ ë¶„ë¦¬**

```rust
fn parse_command(input: &str) -> Result<TimerCommand, ()> {
    input.trim().parse()
}
```

ì´ìœ :

* ë‚˜ì¤‘ì—

  * ë³„ì¹­ (`p`, `pause`)
  * ëŒ€ì†Œë¬¸ì í—ˆìš©
  * help ëª…ë ¹
    ì¶”ê°€í•˜ê¸° ì‰¬ì›€

---

# 5ï¸âƒ£ ì¶œë ¥ ë¡œì§ `Display` ì˜ì¡´ë„ ì¤„ì´ê¸° (ì¤‘ìš” â­â­)

### í˜„ì¬

```rust
println!("{}", timer);
```

### ë¬¸ì œ

* `Display`ê°€ **UI ì¶œë ¥ í¬ë§·ê¹Œì§€ ì±…ì„**
* CLI ë§ê³  GUIë¡œ ê°€ë©´ ì¬ì‚¬ìš© ë¶ˆê°€

### ê°œì„  ì•„ì´ë””ì–´

```rust
impl Timer {
    pub fn remaining(&self) -> Duration { ... }
}
```

```rust
println!(
    "{:02}:{:02}",
    timer.remaining().as_secs() / 60,
    timer.remaining().as_secs() % 60
);
```

ğŸ‘‰ `Display`ëŠ” **ë””ë²„ê¹…ìš© / ê¸°ë³¸ í‘œí˜„**
ğŸ‘‰ UI í¬ë§·ì€ í˜¸ì¶œë¶€ì—ì„œ

---

# 6ï¸âƒ£ `CustomError` í™•ì¥ ëŒ€ë¹„ (ì¤‘ìš” â­â­)

### í˜„ì¬

```rust
enum CustomError {
    InputError,
}
```

### ê°œì„ 

```rust
enum SettingError {
    InvalidInput,
    Io(std::io::Error),
}
```

```rust
impl From<std::io::Error> for SettingError {
    fn from(e: std::io::Error) -> Self {
        SettingError::Io(e)
    }
}
```

ğŸ‘‰ ì—ëŸ¬ ì „ë‹¬ì´ ê¹”ë”í•´ì§€ê³ 
ğŸ‘‰ ë‚˜ì¤‘ì— `thiserror` ë¶™ì´ê¸° ì‰¬ì›€

---

# 7ï¸âƒ£ ë©”ë‰´ ë£¨í”„ UX ê°œì„  (ë³´ë„ˆìŠ¤ â­)

### í˜„ì¬

```rust
println!("timer-cli start");
```

ğŸ‘‰ ë§¤ ë£¨í”„ë§ˆë‹¤ ì¶œë ¥ë¨

### ê°œì„ 

* ì‹œì‘ ì‹œ í•œ ë²ˆë§Œ ì¶œë ¥
* ë©”ë‰´ ì¶œë ¥ í•¨ìˆ˜ ë¶„ë¦¬

```rust
fn print_menu() {
    println!("ë©”ë‰´ : 1) timer 2) setting");
}
```

---

# ğŸ”¥ í•µì‹¬ ìš”ì•½

### ì§€ê¸ˆ ë‹¹ì¥ ê°€ì¥ ê°€ì¹˜ ìˆëŠ” ë¦¬íŒ©í† ë§ TOP 3

1ï¸âƒ£ **stdin í•˜ë‚˜ë¡œ í†µí•©**
2ï¸âƒ£ **`TimerState` ì§ì ‘ ì ‘ê·¼ ì œê±°**
3ï¸âƒ£ **`run_timer` ì±…ì„ ë¶„ë¦¬**

ì´ 3ê°€ì§€ë§Œ í•´ë„

> â€œì—°ìŠµìš© CLIâ€ â†’ â€œêµ¬ì¡°ê°€ ìˆëŠ” ì•±â€

ìˆ˜ì¤€ìœ¼ë¡œ ì˜¬ë¼ê°‘ë‹ˆë‹¤.

---

ì›í•˜ë©´ ë‹¤ìŒë„ ë°”ë¡œ ë„ì™€ì¤„ ìˆ˜ ìˆì–´ìš”:

* `Timer` ëª¨ë“ˆ ë‚´ë¶€ êµ¬ì¡° ë¦¬ë·°
* `tokio::select!` ë” ì•ˆì „í•˜ê²Œ ì“°ëŠ” íŒ¨í„´
* ì´ ì½”ë“œ â†’ **TUI(crossterm) ë²„ì „ìœ¼ë¡œ í™•ì¥ ì„¤ê³„**
* í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•œ êµ¬ì¡°ë¡œ ë¦¬íŒ©í† ë§

ì–´ë””ê¹Œì§€ ë‹¤ë“¬ê³  ì‹¶ì€ì§€ ë§í•´ì¤˜ìš”.
